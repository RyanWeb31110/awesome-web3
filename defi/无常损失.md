# Impermanent Loss Explained 无常损失解释

去中心化金融 (DeFi) 协议的交易量和流动性呈现爆炸式增长。它们让任何拥有资金的人都能成为做市商并赚取交易费。市场做市的民主化在加密货币领域促成大量无摩擦的经济活动。

那么，在这些平台上提供流动性之前，你应该了解什么呢？需要理解的最重要的概念之一是无常损失——这也是我们将在本文中讨论的内容。

- 当您的代币的价格比率与您将其存入流动资金池时的价格比率发生变化时，就会发生无常损失。
- 这种变化越大，相对于简单持有代币（HODLing）的潜在损失就越大。
- 这意味着你最终可能会因为向 DeFi 池提供流动性而亏损。这源于自动做市商 (AMM) 的特殊市场固有的设计特性。
- 向流动性池提供流动性可以带来利润，但您需要牢记无常损失的概念，以避免潜在的损失。



## 什么是无常损失？

当您向资金池提供流动性时，就会发生无常损失，并且您存入的资产之间的价格比率与您存入时相比会发生变化。

这种变化越大，你遭受无常损失的风险就越大。这意味着，在提取资产时，你收回的资产的美元价值可能比你直接将其放在资产池外时更低。

价格比率相对稳定的资产（例如与同一货币挂钩的稳定币，或与同一货币不同[版本](https://academy.binance.com/en/articles/tokenized-bitcoin-on-ethereum-explained)的稳定币）的池子，通常发生无常损失的风险较低。然而，即使是稳定币，也可能出现[脱钩](https://academy.binance.com/en/articles/why-do-stablecoins-depeg)事件，这可能会暂时增加风险。

为什么流动性提供者（LP）仍然愿意承担风险呢？因为无常损失通常可以通过提供流动性时赚取的交易费来抵消，甚至完全补偿。

例如， [Uniswap](https://academy.binance.com/en/articles/what-is-uniswap-and-how-does-it-work) 对每笔交易收取费用，这些费用直接支付给流动性提供者。如果交易量足够大，即使在面临无常损失的资金池中，收取的费用也能使提供流动性获得利润。盈利能力取决于协议、具体资金池、资产以及更广泛的市场状况。



## 无常损失是如何发生的？

让我们通过一个例子来了解一下无常损失对于流动性提供者来说是什么样的。

为了更好地理解无常损失，我们通过一个详细的数学例子来逐步分析。

### 🔍 初始状态设定

**Alice的初始投资：**
- 投入：1 ETH + 100 USDC
- 当时价格：1 ETH = 100 USDC
- 总投资价值：200 美元

**流动性池的初始状态：**
- 池子总资产：10 ETH + 1,000 USDC
- 池子总价值：2,000 美元
- Alice的份额：200/2,000 = 10%
- 恒定乘积：k = 10 × 1,000 = 10,000

> 💡 **核心原理**：AMM使用恒定乘积公式 x × y = k，其中x和y分别是两种代币的数量，k是常数。

### 📈 价格变化后的套利过程

当ETH价格从100 USDC涨到400 USDC时，会发生什么？

**第1步：外部价格变化**
- 新价格：1 ETH = 400 USDC
- 但池子里的比例还是 10 ETH : 1,000 USDC（隐含价格仍是1:100）
- 这创造了套利机会！

**第2步：套利者行动**
套利者会不断买入便宜的ETH，卖出USDC，直到池内价格与外部价格一致。

我们来计算最终平衡状态：
- 设最终池子有 x 个ETH，y 个USDC
- 根据恒定乘积：x × y = 10,000
- 根据新价格关系：y/x = 400（池内价格要等于外部价格）

解这个方程组：
```
x × y = 10,000
y = 400x

代入得：x × 400x = 10,000
400x² = 10,000
x² = 25
x = 5

因此：y = 400 × 5 = 2,000
```

**套利后的池子状态：**
- 池子资产：5 ETH + 2,000 USDC
- 池子价值：5×400 + 2,000 = 4,000 美元
- Alice的10%份额：0.5 ETH + 200 USDC

### 💰 收益对比分析

**场景A：Alice提供流动性**
- 取回资产：0.5 ETH + 200 USDC
- 当前价值：0.5×400 + 200 = 400 美元
- 相比初始投资200美元，收益：100%

**场景B：Alice简单持有（HODL）**
- 持有资产：1 ETH + 100 USDC
- 当前价值：1×400 + 100 = 500 美元  
- 相比初始投资200美元，收益：150%

### 🔴 无常损失计算

**无常损失 = HODL价值 - LP价值 = 500 - 400 = 100 美元**

**损失比例 = 100/500 = 20%**

### 🤔 为什么会产生无常损失？

**根本原因分析：**

1. **被动再平衡机制**：当你提供流动性时，AMM会自动"帮你"卖出涨价的资产，买入跌价的资产
   - ETH涨价时，系统自动卖出部分ETH换成USDC
   - 这相当于在价格上涨过程中不断"获利了结"

2. **数学必然性**：恒定乘积公式决定了
   - 涨价资产的数量会减少（从1 ETH → 0.5 ETH）
   - 跌价资产的数量会增加（从100 USDC → 200 USDC）

3. **时机差异**：
   - HODL策略：完全持有到最高价
   - LP策略：在上涨过程中逐步减持

### 📊 直观理解

想象你开了一家自动售货机：
- **初始库存**：10个苹果，每个10元
- **价格规则**：库存越少，价格越高
- 当苹果涨价到40元时，由于自动销售规则，你只剩5个苹果
- 虽然单价涨了4倍，但数量减半，总收益没有直接持有10个苹果那么高

**这就是无常损失的本质：在价格上涨时自动减持，在价格下跌时自动加仓。**

### ⚠️ 重要提醒

1. **双向性**：无论价格上涨还是下跌，只要偏离初始比例就有无常损失
2. **暂时性**：只要价格比例回到初始状态，损失就会消失
3. **费用补偿**：交易手续费可能弥补甚至超过无常损失
4. **风险评估**：高波动性资产对的无常损失风险更高



## 无常损失估计

当池中资产的价格发生变化时，就会发生无常损失。但具体损失是多少呢？

我们可以用图表来表示。需要注意的是，它不包含提供流动性所赚取的费用。

![impermanent loss estimation chart](https://public.bnbstatic.com/static/academy/static/academy/editor-uploads/b5cdb32d613c4c1fbc43ad04ac67c979.)

以下是图表与 HODLing 相比的损失总结：

- 1.25倍价格变化=约0.6%的损失
- 1.50倍价格变化=约2.0%的损失
- 1.75倍价格变化=约3.8%的损失
- 2倍价格变化=约5.7%的损失
- 3倍价格变化=约13.4%的损失
- 4倍价格变化=约20.0%的损失
- 5倍价格变化=约25.5%的损失

注意， **无论价格上涨还是下跌，无常损失都会发生** 。无常损失唯一关心的是相对于存款时间的价格比率。



## 向 AMM 提供流动性的风险

“无常损失”一词可能会引起误解。“无常”指的是，只要您将代币留在池中，损失就不会实现。如果您幸运的话，价格比率可能会恢复。但是，一旦您提取资产，任何损失都将变成永久性的。

您在流动性提供期间赚取的交易费用可能会抵消或超过这些损失，但务必提前了解风险。初期存入较大金额时务必谨慎。从小额入手，评估其中的收益和风险。

此外，还要考虑资产池中资产的波动性——波动性较大的资产对往往具有更高的无常损失风险。

最后，寻找完善的 [AMM](https://academy.binance.com/en/articles/what-is-an-automated-market-maker-amm) 。由于 [DeFi](https://academy.binance.com/en/articles/the-complete-beginners-guide-to-decentralized-finance-defi) 协议易于分叉或修改，新的或未经审计的 AMM 可能存在漏洞或风险，从而可能影响您的资金。警惕那些承诺异常高回报的资金池，因为这些资金池可能伴随更高的风险。



### 降低风险

现代 AMM 设计提供了诸如集中流动性或稳定币优化池等功能，可以降低无常损失风险。此外，单边流动性提供选项也正在兴起。探索这些替代方案或许可以帮助用户降低一些常见的风险。



## 结语

无常损失是任何想要为 AMM 提供流动性的人都应该理解的基本概念之一。简而言之，如果存入资产的价格比率自存入以来发生变化，流动性提供者可能会面临无常损失。



## 进一步阅读

- [Why Do Stablecoins Depeg?
  稳定币为何要脱钩？](https://academy.binance.com/en/articles/why-do-stablecoins-depeg)
- [What Is an Automated Market Maker (AMM)?
  什么是自动做市商（AMM）？](https://academy.binance.com/en/articles/what-is-an-automated-market-maker-amm)
- [What Is Uniswap and How Does It Work?
  什么是 Uniswap 以及它如何运作？](https://academy.binance.com/en/articles/what-is-uniswap-and-how-does-it-work)
- [What Is Decentralized Finance (DeFi)?
  什么是去中心化金融（DeFi）？](https://academy.binance.com/en/articles/the-complete-beginners-guide-to-decentralized-finance-defi)


原文：https://academy.binance.com/en/articles/impermanent-loss-explained